!function(t,e){"use strict";function l(t){t.widget("table",{title:"Table",description:"Displays a table of data from a json url",templateUrl:"{widgetsPath}/table/src/view/view.html",controller:"tableController",controllerAs:"vm",reload:!0,resolve:{data:["tableService","config",function(t,e){return t.get(e)}]},edit:{controller:"tableEditController",controllerAs:"vm",templateUrl:"{widgetsPath}/table/src/edit/edit.html"}})}function a(t){this.data=t}function o(t){function e(){return t.columns||(t.columns=[]),t.columns}this.config=t,this.addColumn=function(){e().push({})},this.removeColumn=function(t){e().splice(t,1)}}function r(t,e,l){function a(t,e){var a=[];return angular.forEach(t.columns,function(t,o){t.title&&t.path&&(e.headers[o]=t.title,a.push({title:t.title,path:l(t.path)}))}),a}function o(t,e){var o={headers:[],rows:[]},r=e;t.root&&(r=l(t.root)(e));var n=a(t,o);return angular.forEach(r,function(t){var e=[];angular.forEach(n,function(l,a){var o=l.path(t);e[a]=o}),o.rows.push(e)}),o}function r(t){return e.get(t.url).then(function(t){return t.data}).then(function(e){return o(t,e)})}function n(t){var e=null;return t.url&&(e=r(t)),e}return{get:n}}angular.module("adf.widget.table",["adf.provider"]).config(l),l.$inject=["dashboardProvider"],angular.module("adf.widget.table").run(["$templateCache",function(t){t.put("{widgetsPath}/table/src/edit/edit.html",'<form role=form><div class=form-group><label for=sample>URL</label> <input type=text class=form-control ng-model=config.url placeholder="Enter url"></div><div class=form-group><label for=sample>Root element</label> <input type=text class=form-control ng-model=config.root placeholder="Enter name of root element"></div><div><label>Columns</label></div><div class="form-inline padding-bottom" ng-repeat="col in vm.config.columns"><div class=form-group><label class=sr-only for=title-{{$index}}>Title</label> <input type=text id=title-{{$index}} class=form-control placeholder=Title ng-model=col.title required></div><div class=form-group><label class=sr-only for=path-{{$index}}>Path</label> <input type=text id=path-{{$index}} class=form-control placeholder=Path ng-model=col.path required></div><button type=button class="btn btn-warning" ng-click=vm.removeColumn($index)><i class="fa fa-minus"></i> Remove</button></div><button type=button class="btn btn-primary" ng-click=vm.addColumn()><i class="fa fa-plus"></i> Add</button></form>'),t.put("{widgetsPath}/table/src/view/view.html",'<div><div ng-hide=vm.data class="alert alert-info" role=alert>Please insert a url to the widget configuration</div><table ng-show=vm.data class=table><tr><th ng-repeat="head in vm.data.headers">{{head}}</th></tr><tr ng-repeat="row in vm.data.rows"><td ng-repeat="col in row">{{col}}</td></tr></table></div>')}]),angular.module("adf.widget.table").controller("tableController",a),a.$inject=["data"],angular.module("adf.widget.table").controller("tableEditController",o),o.$inject=["config"],angular.module("adf.widget.table").service("tableService",r),r.$inject=["$q","$http","$parse"]}(window);